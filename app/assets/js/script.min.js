"use strict";var Place=function(e){this.placeId=ko.observable(e.place_id),this.title=ko.observable(e.title),this.latLng=ko.observable(e.latLng),this.marker=null,this.description=ko.observable(e.description),this.itemActive=ko.observable(e.itemActive)},ViewModel=function(e,t){var i=this;i.sidebarActiveClass="active",i.googleMap=e,i.filterInput=ko.observable(""),i.placesList=ko.observableArray([]),t.forEach(function(e){i.placesList.push(new Place(e))}),i.currentPlace=ko.observable(i.placesList()[0]),i.filter=function(){var e=i.filterInput().toLowerCase();i.placesList([]),t.forEach(function(t){t.title.toLowerCase().indexOf(e)!==-1&&i.placesList.push(new Place(t))})},ko.observableArray.fn.refresh=function(e){var t=this.indexOf(e);t>=0&&(this.splice(t,1),this.splice(t,0,e))},ko.observableArray.fn.refreshAll=function(){var e=this.slice(0);this.removeAll(),this(e)},i.setCurrentPlace=function(e){i.currentPlace(e),ko.utils.arrayForEach(i.placesList(),function(t){t.itemActive=ko.pureComputed(function(){return t.placeId()===e.placeId()})}),i.placesList.refreshAll();var t="http://en.wikipedia.org/w/api.php?action=opensearch&search="+e.title()+"&format=json&callback=wikiCallback",r=setTimeout(function(){e.description=ko.pureComputed(function(){return"Failed to get Wikipedia resources"})},5e3);$.ajax({url:t,dataType:"jsonp",jsonp:"callback",success:function(t){var o=t[2];e.description=ko.pureComputed(function(){return o[0]?o[0]:"Description not found"}),i.placesList.refresh(e),clearTimeout(r)},error:function(t){e.description=ko.pureComputed(function(){return"Something went wrong"}),console.log("Request returned an error: ",t)}})}};